// SYSTÈME DE TRADUCTION FR/EN
// ====================================

const translations = {
    en: {
        // Navigation
        nav: {
            home: "Home",
            services: "Services",
            expertise: "Expertise",
            contact: "Contact"
        },

        // Hero Section
        hero: {
            subtitle1: "Your Digital Renaissance Starts Here",
            subtitle2: "Specialists in AI, NoCode, Automation & Cybersecurity. We bring your digital projects to life",
            stat1: {
                number: "65%",
                label: "adopt generative AI"
            },
            stat2: {
                number: "€2.3",
                label: "saved per agent/day"
            }
        },

        // Services
        services: {
            title: "Our Services",
            service1: {
                name: "Artificial Intelligence",
                desc: "Solutions for your challenges, including custom agents"
            },
            service2: {
                name: "NoCode Automation",
                desc: "Fast and adapted applications without complex development"
            },
            service3: {
                name: "Data & Analytics",
                desc: "Transform your data into strategic insights"
            },
            service4: {
                name: "Cybersecurity & Compliance",
                desc: "Protection and governance of your digital assets"
            }
        },

        // Expertise Section
        expertise: {
            title: "Our Expertise",
            subtitle: "Transform your digital vision into reality with our 360° expertise",
            stat1: {
                number: "5+",
                label: "years experience"
            },
            stat2: {
                number: "20+",
                label: "projects delivered"
            },
            stat3: {
                number: "95%",
                label: "client satisfaction"
            },
            
            domains: {
                ai: {
                    title: "Artificial Intelligence",
                    items: [
                        "Custom virtual agents and chatbots",
                        "LLM models and orchestration",
                        "Text generation & intelligent analysis",
                        "Computer vision & OCR",
                        "Recommendation engines"
                    ]
                },
                automation: {
                    title: "Automation & NoCode",
                    items: [
                        "Workflow automation (Make, n8n, Zapier)",
                        "Business applications (Bubble, FlutterFlow)",
                        "Process optimization",
                        "System integrations",
                        "Intelligent RPA"
                    ]
                },
                data: {
                    title: "Data & Analytics",
                    items: [
                        "Interactive dashboards (Looker Studio, Power BI)",
                        "ETL pipelines and data transformation",
                        "Predictive analysis",
                        "Data warehousing",
                        "Data governance"
                    ]
                },
                cyber: {
                    title: "Cybersecurity",
                    items: [
                        "Security audits & pentesting",
                        "SOC/SIEM implementation",
                        "Regulatory compliance (GDPR, NIS2)",
                        "Incident response",
                        "Security awareness training"
                    ]
                }
            }
        },

        // CTA Section
        cta: {
            title: "Ready to Transform Your Business?",
            subtitle: "Let's discuss your project and explore possibilities together",
            button: "Contact Us"
        },

        // Contact Form
        contact: {
            title: "Contact Us",
            subtitle: "Let's transform your digital challenges into opportunities",
            form: {
                name: "Name",
                email: "Email",
                phone: "Phone",
                message: "Message",
                submit: "Send Message"
            },
            info: {
                address: "Grenoble, France",
                phone: "+33 6 XX XX XX XX",
                email: "contact@thephoenixagency.fr"
            }
        },

        // Cookie Banner
        cookie: {
            message: "We use cookies to enhance your experience. By continuing to visit this site you agree to our use of cookies.",
            accept: "Accept",
            reject: "Reject"
        }
    },

    fr: {
        // Navigation
        nav: {
            home: "Accueil",
            services: "Services",
            expertise: "Expertise",
            contact: "Contact"
        },

        // Hero Section
        hero: {
            subtitle1: "Votre Renaissance Numérique Commence Ici",
            subtitle2: "Transformez Votre Entreprise avec l'Intelligence Artificielle",
            subtitle2: "Spécialistes en IA, NoCode, Automatisation & Cybersécurité. Nous donnons vie à vos projets digitaux",
            stat1: {
                number: "65%",
                label: "adoptent l'IA générative"
            },
            stat2: {
                number: "2,3€",
                label: "économisés par agent/jour"
            }
        },

        // Services
        services: {
            title: "Nos Services",
            service1: {
                name: "Intelligence Artificielle",
                desc: "Des solutions à vos enjeux, y compris des agents sur-mesure"
            },
            service2: {
                name: "Automatisation NoCode",
                desc: "Applications rapides et adaptées sans développement complexe"
            },
            service3: {
                name: "Data & Analytics",
                desc: "Transformez vos données en insights stratégiques"
            },
            service4: {
                name: "Cybersécurité & Conformité",
                desc: "Protection et gouvernance de vos actifs numériques"
            }
        },

        // Expertise Section
        expertise: {
            title: "Notre Expertise",
            subtitle: "Transformez votre vision digitale en réalité avec notre expertise 360°",
            stat1: {
                number: "5+",
                label: "ans d'expérience"
            },
            stat2: {
                number: "20+",
                label: "projets livrés"
            },
            stat3: {
                number: "95%",
                label: "de satisfaction client"
            },
            
            domains: {
                ai: {
                    title: "Intelligence Artificielle",
                    items: [
                        "Agents virtuels et chatbots sur-mesure",
                        "Modèles LLM et orchestration",
                        "Génération de texte & analyse intelligente",
                        "Vision par ordinateur & OCR",
                        "Moteurs de recommandation"
                    ]
                },
                automation: {
                    title: "Automatisation & NoCode",
                    items: [
                        "Automatisation de workflows (Make, n8n, Zapier)",
                        "Applications métier (Bubble, FlutterFlow)",
                        "Optimisation de processus",
                        "Intégrations de systèmes",
                        "RPA intelligent"
                    ]
                },
                data: {
                    title: "Data & Analytics",
                    items: [
                        "Tableaux de bord interactifs (Looker Studio, Power BI)",
                        "Pipelines ETL et transformation de données",
                        "Analyse prédictive",
                        "Data warehousing",
                        "Gouvernance des données"
                    ]
                },
                cyber: {
                    title: "Cybersécurité",
                    items: [
                        "Audits de sécurité & pentesting",
                        "Mise en place SOC/SIEM",
                        "Conformité réglementaire (RGPD, NIS2)",
                        "Réponse aux incidents",
                        "Sensibilisation à la sécurité"
                    ]
                }
            }
        },

        // CTA Section
        cta: {
            title: "Prêt à Transformer Votre Entreprise ?",
            subtitle: "Discutons de votre projet et explorons ensemble les possibilités",
            button: "Nous Contacter"
        },

        // Contact Form
        contact: {
            title: "Nous Contacter",
            subtitle: "Transformons ensemble vos défis digitaux en opportunités",
            form: {
                name: "Nom",
                email: "Email",
                phone: "Téléphone",
                message: "Message",
                submit: "Envoyer"
            },
            info: {
                address: "Grenoble, France",
                phone: "+33 6 XX XX XX XX",
                email: "contact@thephoenixagency.fr"
            }
        },

        // Cookie Banner
        cookie: {
            message: "Nous utilisons des cookies pour améliorer votre expérience. En continuant à visiter ce site, vous acceptez notre utilisation des cookies.",
            accept: "Accepter",
            reject: "Refuser"
        }
    }
};

// Variable pour stocker la langue actuelle
let currentLang = 'fr'; // Français par défaut

// Fonction pour détecter la langue via l'IP
async function detectLanguageByIP() {
    try {
        const response = await fetch('https://ipapi.co/json/');
        const data = await response.json();
        
        // Liste des pays francophones principaux
        const francophoneCountries = ['FR', 'BE', 'CH', 'CA', 'LU', 'MC'];
        
        return francophoneCountries.includes(data.country_code) ? 'fr' : 'en';
    } catch (error) {
        console.error('Erreur lors de la détection de la langue:', error);
        return 'fr'; // Par défaut en français
    }
}

// Fonction pour changer la langue
function changeLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('preferredLanguage', lang);
    applyTranslations();
    updateLanguageButton();
}

// Fonction pour appliquer les traductions
function applyTranslations() {
    const t = translations[currentLang];
    
    // Navigation
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        const keys = key.split('.');
        let value = t;
        
        for (const k of keys) {
            value = value[k];
        }
        
        if (value) {
            element.textContent = value;
        }
    });

    // Gestion du Cookie Banner
    const cookieMessage = document.querySelector('[data-i18n="cookie.message"]');
    const cookieAccept = document.querySelector('[data-i18n="cookie.accept"]');
    const cookieReject = document.querySelector('[data-i18n="cookie.reject"]');
    
    if (cookieMessage) cookieMessage.textContent = t.cookie.message;
    if (cookieAccept) cookieAccept.textContent = t.cookie.accept;
    if (cookieReject) cookieReject.textContent = t.cookie.reject;
}

// Mettre à jour l'apparence du bouton de langue
function updateLanguageButton() {
    // Support both old langSwitcher and new langBtn
    const langBtn = document.getElementById('langBtn') || document.getElementById('langSwitcher');
    if (langBtn) {
        if (currentLang === 'fr') {
            langBtn.textContent = 'EN';
            langBtn.setAttribute('aria-label', 'Switch to English');
        } else {
            langBtn.textContent = 'FR';
            langBtn.setAttribute('aria-label', 'Passer au français');
        }
    }
}

// Basculer entre les langues
function toggleLanguage() {
    const newLang = currentLang === 'fr' ? 'en' : 'fr';
    changeLanguage(newLang);
}

// Initialisation au chargement de la page
async function initializeLanguage() {
    // Vérifier si l'utilisateur a une préférence sauvegardée
    const savedLang = localStorage.getItem('preferredLanguage');
    
    if (savedLang) {
        currentLang = savedLang;
    } else {
        // Détecter la langue par IP
        currentLang = await detectLanguageByIP();
        localStorage.setItem('preferredLanguage', currentLang);
    }
    
    applyTranslations();
    updateLanguageButton();
}

// Lancer l'initialisation quand le DOM est prêt
document.addEventListener('DOMContentLoaded', initializeLanguage);
